# Session Harbor

A local dashboard for managing AI coding session logs. Dock, scan, and relaunch sessions from **Codex**, **Claude**, and **Copilot**.

```
┌─────────────────────────────────────────────────────────────────┐
│  Session Harbor                           Codex │ Claude │ Copilot  │
├────────────────────┬────────────────────────────────────────────┤
│  PROJECTS          │  DETAILS                                   │
│  ───────────────── │  ────────────────────────────────────────  │
│  > session-harbor  │  FILE        PROJECT      TIME     MSGS    │
│    my-api          │  abc123.json .../harbor   Jan 21   142     │
│    web-app         │                                            │
│                    │  ┌─ Messages ─────────────────────────┐   │
│  SESSIONS (12)     │  │ USER   08:42                       │   │
│  ───────────────── │  │ Add dark mode toggle               │   │
│  ■ implement-auth  │  │                                    │   │
│    fix-routing     │  │ ASSISTANT   08:42                  │   │
│    add-tests       │  │ I'll add a dark mode toggle...     │   │
│                    │  └────────────────────────────────────┘   │
└────────────────────┴────────────────────────────────────────────┘
```

## Quick Start (Desktop App)

```sh
# Build and package the macOS app
npm run build:desktop

# Install into /Applications
bash scripts/install-macos-app.sh
```

Launch **Session Harbor** from Applications.

## Features

| Feature | Description |
|---------|-------------|
| **Multi-source** | Browse sessions from Codex, Claude, and Copilot |
| **Search** | Filter by project, path, ID, or filename |
| **Labels** | Name and organize sessions with custom labels |
| **Archive** | Move old sessions to `Archive/` folder |
| **Rejoin/Focus** | Jump back into active Codex sessions |
| **Reports** | Generate analysis reports from session history |
| **Feedback** | Track what went well and needs improvement |

## Session Sources

| Source | Path | Status API |
|--------|------|------------|
| Codex | `~/.codex/sessions` | `/api/status` |
| Claude | `~/.claude/projects` | `/api/claude/status` |
| Copilot | `~/.copilot/session-state` | `/api/copilot/status` |

## CLI Commands (Optional)

```sh
# Start the server (development/CLI usage)
npm start

# Generate session analysis report
npm run review:sessions -- --source both --limit 100

# Log feedback for a session
npm run feedback:log
```

### Semantic search from the CLI

The CLI reads `data/session-embeddings.jsonl` and generates an embedding for your query.

```sh
# Requires OPENAI_API_KEY and an existing embedding index
session-harbor session-search --semantic --query "where did we discuss rate limiting?" --limit 10

# (Optional) filter to a provider
session-harbor session-search --semantic --source codex --query "vector" --limit 10
```

## API Endpoints

### Sessions
```
GET  /api/sessions              # List Codex sessions
GET  /api/claude/sessions       # List Claude sessions
GET  /api/copilot/sessions      # List Copilot sessions
GET  /api/session?file=<path>   # Get session detail
GET  /api/projects?source=<src> # List projects
GET  /api/search?query=<q>      # Search sessions
```

### Actions
```
POST /api/name                  # Save session label
POST /api/name-by-id            # Save session label by sessionId
POST /api/archive-session       # Archive session
POST /api/archive-by-id         # Archive session by sessionId
POST /api/new-session           # Start new session
POST /api/complete-session      # Mark session complete
POST /api/complete-by-id        # Mark session complete by sessionId
GET  /api/resume?sessionId=<id> # Rejoin session
GET  /api/focus?sessionId=<id>  # Focus session
```

### Reports & Feedback
```
GET  /api/reports               # List reports
GET  /api/report?name=<name>    # Get report detail
GET  /api/feedback-log          # Get feedback entries
```

### Semantic Search (Embeddings)

Requires `OPENAI_API_KEY`. Embeddings are generated by calling the OpenAI Embeddings API directly (no dependency on `@innoisotechnology/ai-library`).

```
GET  /api/index/semantic                     # (Re)index new/changed sessions into local embeddings store
GET  /api/search/semantic?q=<query>&limit=10 # Semantic search across indexed sessions
```

## Data Storage

```
session-harbor/
├── data/
│   ├── session-names.json            # Custom session labels
│   ├── pending-names.json            # Pending name assignments
│   ├── session-embeddings.jsonl      # Local semantic search embeddings
│   └── feedback.jsonl                # Feedback log
└── reports/
    └── session-review-*/     # Generated reports
        ├── summary.md
        ├── sessions.json
        └── recommendations.json
```

## Tech Stack

- **Frontend**: Vue 3, TypeScript, Tailwind CSS, Vite
- **Backend**: Node.js HTTP server
- **Data**: File-based (JSONL logs, JSON storage)

## Development (Optional)

```sh
# Install dependencies
npm install
cd frontend && npm install

# Run backend in dev mode (hot reload)
npm run dev

# Build frontend for production
cd frontend && npm run build
```

## Desktop App (Electron)

```sh
# Build the frontend + backend and package a macOS app
npm run build:desktop
```

The packaged app is written to `dist-electron/` (DMG + ZIP). On launch, the app runs the backend in-process and serves the bundled frontend.

```sh
# Install the latest DMG/ZIP into /Applications
bash scripts/install-macos-app.sh
```

## Releases

Session Harbor publishes versioned desktop releases (DMG + ZIP) via GitHub Actions.

### Create a release

1. Update the version in `package.json`.
2. Commit the change.
3. Create and push a tag (format `vX.Y.Z`), for example:

```sh
git tag v0.1.0
git push origin v0.1.0
```

The GitHub Actions workflow will build the macOS app and attach the DMG/ZIP artifacts
to a GitHub Release for that tag.

### Unsigned builds (Gatekeeper warning)

Releases are unsigned by default. Until code signing and notarization are set up,
macOS will show a Gatekeeper warning on first launch. Users can still run the app
by right-clicking the app and choosing **Open**, or by allowing it in
System Settings → Privacy & Security → Open Anyway.

### Desktop Data Locations

- App data (labels, status, feedback): `~/Library/Application Support/Session Harbor/data/`
- Reports: `~/Library/Application Support/Session Harbor/reports/`

You can override these with:

```sh
SESSION_HARBOR_DATA_DIR=/path/to/data \
SESSION_HARBOR_REPORTS_DIR=/path/to/reports \
npm run electron
```

---

<sub>Session Harbor reads `.jsonl` session logs and provides a unified interface for managing your AI coding sessions.</sub>
